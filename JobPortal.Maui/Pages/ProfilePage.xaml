<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="JobPortal.Maui.Pages.ProfilePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controlls="clr-namespace:JobPortal.Maui.Controlls"
    xmlns:viewmodels="clr-namespace:JobPortal.Maui.ViewModels"
    Title="ProfilePage"
    x:DataType="viewmodels:ProfilePageViewModel">
    <ContentPage.Resources>
        <Style x:Key="EntryBorder" TargetType="Border">
            <Setter Property="StrokeShape" Value="RoundRectangle 10,10,10,10" />
            <Setter Property="Stroke" Value="black" />
            <Setter Property="StrokeThickness" Value="2" />
        </Style>
    </ContentPage.Resources>
    <Grid>
        <ScrollView>
            <Grid HorizontalOptions="Center">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1000" />
                </Grid.ColumnDefinitions>

                <VerticalStackLayout>
                    <!--  PROFILE PHOTO AND NAME  -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Border
                            Grid.Column="0"
                            Padding="0"
                            Background="#2B0B98"
                            HeightRequest="150"
                            Stroke="#C49B33"
                            StrokeShape="RoundRectangle 100"
                            StrokeThickness="6"
                            WidthRequest="150">
                            <Image
                                Aspect="Fill"
                                BackgroundColor="Pink"
                                Source="{Binding ProfileImage}" />
                        </Border>

                        <HorizontalStackLayout Grid.Column="1" VerticalOptions="Center">
                            <Label Text="{Binding CurrentHeaderName}" />
                            <Label Margin="5,0,0,0" Text="{Binding CurrentHeaderSurname}" />
                        </HorizontalStackLayout>
                    </Grid>

                    <!--  PROFILE BASIC INFORMATION  -->

                    <Frame Padding="20" BorderColor="Black">
                        <VerticalStackLayout>
                            <Label Text="Podstawowe dane" />
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>

                                <Border
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding BasicInfoEdit}"
                                        Placeholder="Imię"
                                        Text="{Binding Name}" />
                                </Border>

                                <Border
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding BasicInfoEdit}"
                                        Placeholder="Nazwisko"
                                        Text="{Binding Surname}" />
                                </Border>

                                <Border
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding BasicInfoEdit}"
                                        Placeholder="Email"
                                        Text="{Binding Email}" />
                                </Border>

                                <Border
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding BasicInfoEdit}"
                                        Placeholder="Numer telefonu"
                                        Text="{Binding PhoneNumber}" />
                                </Border>

                                <Border
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding BasicInfoEdit}"
                                        Placeholder="Miejscowość"
                                        Text="{Binding Location}" />
                                </Border>

                                <Border
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Style="{StaticResource EntryBorder}">
                                    <DatePicker Date="{Binding BirthDate}" IsEnabled="{Binding BasicInfoEdit}">
                                        <DatePicker.Triggers>
                                            <DataTrigger
                                                Binding="{Binding BasicInfoEdit}"
                                                TargetType="DatePicker"
                                                Value="False">
                                                <Setter Property="IsEnabled" Value="True" />
                                            </DataTrigger>
                                            <DataTrigger
                                                Binding="{Binding BasicInfoEdit}"
                                                TargetType="DatePicker"
                                                Value="True">
                                                <Setter Property="IsEnabled" Value="False" />
                                            </DataTrigger>
                                        </DatePicker.Triggers>
                                    </DatePicker>
                                </Border>

                                <Button
                                    Grid.Row="3"
                                    Grid.Column="1"
                                    Command="{Binding SetBasicInfoEditModeCommand}"
                                    Text="{Binding BasicInfoEditButtonText}" />
                            </Grid>
                        </VerticalStackLayout>
                    </Frame>

                    <!--  PROFILE CURRENT WORKPLACE  -->

                    <Frame Padding="20" BorderColor="Black">
                        <VerticalStackLayout x:Name="workLayout">
                            <Label Text="Opis aktualnego stanowiska" />
                            <VerticalStackLayout>
                                <HorizontalStackLayout>
                                    <RadioButton
                                        CheckedChanged="CurrentWork_CheckedChanged"
                                        GroupName="CurrentWorkplaceGroup"
                                        IsChecked="{Binding CurrentlyWorking}" />
                                    <Label Text="Jestem aktualnie zatrudniony/a" VerticalTextAlignment="Center" />
                                </HorizontalStackLayout>

                                <HorizontalStackLayout>
                                    <RadioButton
                                        CheckedChanged="CurrentWork_CheckedChanged"
                                        GroupName="CurrentWorkplaceGroup"
                                        IsChecked="{Binding CurrentlyUnemployed}" />
                                    <Label Text="Nie jestem aktualnie zatrudniony/a" VerticalTextAlignment="Center" />
                                </HorizontalStackLayout>
                            </VerticalStackLayout>
                            <Grid x:Name="workGrid">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>

                                <Border
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding WorkplaceInfoEdit}"
                                        Placeholder="Nazwa firmy"
                                        Text="{Binding CompanyName}" />
                                </Border>

                                <Border
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding WorkplaceInfoEdit}"
                                        Placeholder="Branża"
                                        Text="{Binding Industry}" />
                                </Border>

                                <Border
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding WorkplaceInfoEdit}"
                                        Placeholder="Nazwa stanowiska"
                                        Text="{Binding Proffesion}" />
                                </Border>

                                <Border
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry
                                        IsEnabled="{Binding WorkplaceInfoEdit}"
                                        Placeholder="Staż pracy w firmie"
                                        Text="{Binding ProffesionSince}" />
                                </Border>

                                <Border
                                    Grid.Row="3"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Style="{StaticResource EntryBorder}">
                                    <Editor Placeholder="Opis stanowiska" Text="{Binding ProffesionDescription}" />
                                </Border>

                                <Button
                                    Grid.Row="4"
                                    Grid.Column="1"
                                    Command="{Binding SetWorkplaceInfoEditModeCommand}"
                                    Text="{Binding WorkplaceInfoEditButtonText}" />
                            </Grid>
                        </VerticalStackLayout>
                    </Frame>

                    <!--  PROFILE CARRIER  -->

                    <Frame Padding="20" BorderColor="black">
                        <VerticalStackLayout x:Name="carrierLayout">
                            <Label Text="Podsumowanie zawodowe" />
                            <HorizontalStackLayout>
                                <RadioButton
                                    CheckedChanged="Carrier_CheckedChanged"
                                    GroupName="CarrierGroup"
                                    IsChecked="{Binding CarrierYes}" />
                                <Label Text="Posiadam doświadczenie zawodowe" VerticalTextAlignment="Center" />
                            </HorizontalStackLayout>

                            <HorizontalStackLayout>
                                <RadioButton
                                    CheckedChanged="Carrier_CheckedChanged"
                                    GroupName="CarrierGroup"
                                    IsChecked="{Binding CarrierNo}" />
                                <Label Text="Nie posiadam doświadczenia zawodowego" VerticalTextAlignment="Center" />
                            </HorizontalStackLayout>

                            <Grid x:Name="carrierGrid">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="auto" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>



                                <Border
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Style="{StaticResource EntryBorder}">
                                    <controlls:BorderlessEntry Placeholder="Nazwa stanowiska" Text="{Binding CarrierName}" />
                                </Border>
                                <Label
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Text="od" />
                                <Border
                                    Grid.Row="0"
                                    Grid.Column="2"
                                    Style="{StaticResource EntryBorder}">
                                    <DatePicker Date="{Binding CarrierSince}" />
                                </Border>

                                <Button
                                    Grid.Row="2"
                                    Command="{Binding SetCarrierInfoEditModeCommand}"
                                    Text="{Binding CarrierInfoEditButtonText}"
                                    WidthRequest="250" />
                            </Grid>
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Padding="20" BorderColor="black">
                        <VerticalStackLayout x:Name="experienceLayout">
                            <Label Text="Doświadczenie zawodowe" />
                            <Button Clicked="DisplayExperienceGrid_Clicked" Text="Dodaj" />
                            <Grid x:Name="experienceGrid">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>

                                <VerticalStackLayout
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2">
                                    <Label Text="Nazwa firmy" />
                                    <Border Style="{StaticResource EntryBorder}">
                                        <controlls:BorderlessEntry Placeholder="Nazwa firmy" Text="{Binding ExperienceCompanyName}" />
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="1" Grid.Column="0">
                                    <Label Text="Nazwa stanowiska" />
                                    <Border Style="{StaticResource EntryBorder}">
                                        <controlls:BorderlessEntry Placeholder="Nazwa stanowiska" Text="{Binding ExperienceProffesion}" />
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="1" Grid.Column="1">
                                    <Label Text="Lokalizacja" />
                                    <Border Style="{StaticResource EntryBorder}">
                                        <controlls:BorderlessEntry Placeholder="Lokalizacja" Text="{Binding ExperienceLocation}" />
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="2" Grid.Column="0">
                                    <Label Text="Data rozpoczęcia pracy" />
                                    <Border Style="{StaticResource EntryBorder}">
                                        <DatePicker Date="{Binding ExperienceStartDate}" />
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="2" Grid.Column="1">
                                    <Label Text="Data zakończenia pracy" />
                                    <Border Style="{StaticResource EntryBorder}">
                                        <DatePicker Date="{Binding ExperienceEndDate}" />
                                    </Border>
                                </VerticalStackLayout>


                                <HorizontalStackLayout
                                    Grid.Row="3"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    HorizontalOptions="End">
                                    <Button
                                        Command="{Binding InsertExperienceCommand}"
                                        Text="Dodaj do opisu"
                                        WidthRequest="250" />
                                    <Button
                                        Clicked="HideExperienceGrid_Clicked"
                                        Text="Zamknij okno"
                                        WidthRequest="250" />

                                </HorizontalStackLayout>
                            </Grid>
                        </VerticalStackLayout>
                    </Frame>

                </VerticalStackLayout>
            </Grid>
        </ScrollView>
    </Grid>
</ContentPage>